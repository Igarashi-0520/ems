CREATE TABLE password_reset_request (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  target_user_id BIGINT NOT NULL,
  status VARCHAR(20) NOT NULL,
  requested_at TIMESTAMP NOT NULL,
  requested_ip VARCHAR(64),
  decided_by_id BIGINT,
  decided_at TIMESTAMP,
  decided_ip VARCHAR(64),
  decision_note VARCHAR(1000),
  CONSTRAINT fk_prr_target FOREIGN KEY (target_user_id) REFERENCES users(id),
  CONSTRAINT fk_prr_decider FOREIGN KEY (decided_by_id) REFERENCES users(id)
);
CREATE INDEX idx_prr_status ON password_reset_request(status);
CREATE INDEX idx_prr_target_requested ON password_reset_request(target_user_id, requested_at);